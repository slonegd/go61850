{
  "package": "session",
  "description": "ISO 8327-1 OSI Session Protocol implementation for IEC 61850, based on libIEC61850 C library",
  "imports": [
    "errors",
    "fmt",
    "strings"
  ],
  "interfaces": {},
  "types": {
    "SSelector": {
      "type": "struct",
      "description": "Represents session selector",
      "fields": [
        {"name": "Value", "type": "[]byte"}
      ]
    },
    "Session": {
      "type": "struct",
      "description": "Represents ISO 8327-1 session state",
      "fields": [
        {"name": "callingSessionSelector", "type": "SSelector", "private": true},
        {"name": "calledSessionSelector", "type": "SSelector", "private": true},
        {"name": "sessionRequirement", "type": "uint16", "private": true},
        {"name": "protocolOptions", "type": "uint8", "private": true}
      ],
      "methods": []
    },
    "SessionSPDUType": {
      "type": "uint8",
      "description": "Represents Session SPDU type",
      "constants": [
        {"name": "SessionSPDUTypeConnect", "value": 13, "description": "CONNECT (CN)"},
        {"name": "SessionSPDUTypeAccept", "value": 14, "description": "ACCEPT (AC)"},
        {"name": "SessionSPDUTypeRefuse", "value": 15, "description": "REFUSE (RF)"},
        {"name": "SessionSPDUTypeFinish", "value": 17, "description": "FINISH (FN)"},
        {"name": "SessionSPDUTypeDisconnect", "value": 25, "description": "DISCONNECT (DN)"},
        {"name": "SessionSPDUTypeData", "value": 1, "description": "DATA TRANSFER (DT)"}
      ]
    },
    "SessionSPDU": {
      "type": "struct",
      "description": "Represents Session Protocol Data Unit (ISO 8327-1)",
      "fields": [
        {"name": "Type", "type": "SessionSPDUType", "description": "SPDU type"},
        {"name": "Length", "type": "uint8", "description": "SPDU length (without Type and Length fields)"},
        {"name": "ProtocolOptions", "type": "uint8", "description": "Protocol Options from Connect Accept Item"},
        {"name": "ProtocolVersion", "type": "uint8", "description": "Version Number from Connect Accept Item"},
        {"name": "SessionRequirement", "type": "uint16", "description": "Session Requirement flags"},
        {"name": "CalledSessionSelector", "type": "[]byte", "description": "Called Session Selector"},
        {"name": "CallingSessionSelector", "type": "[]byte", "description": "Calling Session Selector (may be absent in ACCEPT)"},
        {"name": "Data", "type": "[]byte", "description": "Data of next level (Presentation)"}
      ],
      "methods": [
        {"name": "String", "signature": "String() string", "description": "Implements fmt.Stringer interface"}
      ]
    }
  },
  "functions": {
    "NewSession": {
      "signature": "NewSession() *Session",
      "description": "Creates a new session with default parameters (sessionRequirement=0x0002, selectors=[0,1], protocolOptions=0)"
    },
    "BuildConnectSPDU": {
      "signature": "BuildConnectSPDU(userData []byte) []byte",
      "description": "Creates CONNECT SPDU (Session Protocol Data Unit) based on IsoSession_createConnectSpdu from C library. Uses default session parameters."
    },
    "ParseSessionSPDU": {
      "signature": "ParseSessionSPDU(data []byte) (*SessionSPDU, error)",
      "description": "Parses Session SPDU from byte buffer, extracting all parameters including ProtocolOptions, ProtocolVersion, SessionRequirement, selectors, and user data"
    },
    "encodeConnectAcceptItem": {
      "signature": "encodeConnectAcceptItem(buf []byte, offset int, options uint8) int",
      "description": "Encodes Connect Accept Item parameter (private function)",
      "private": true
    },
    "encodeSessionRequirement": {
      "signature": "encodeSessionRequirement(session *Session, buf []byte, offset int) int",
      "description": "Encodes Session Requirement parameter (private function)",
      "private": true
    },
    "encodeCallingSessionSelector": {
      "signature": "encodeCallingSessionSelector(session *Session, buf []byte, offset int) int",
      "description": "Encodes Calling Session Selector parameter (private function)",
      "private": true
    },
    "encodeCalledSessionSelector": {
      "signature": "encodeCalledSessionSelector(session *Session, buf []byte, offset int) int",
      "description": "Encodes Called Session Selector parameter (private function)",
      "private": true
    },
    "encodeSessionUserData": {
      "signature": "encodeSessionUserData(buf []byte, offset int, payloadLength int) int",
      "description": "Encodes Session User Data parameter (private function)",
      "private": true
    },
    "buildConnectSPDUWithSession": {
      "signature": "buildConnectSPDUWithSession(session *Session, userData []byte) []byte",
      "description": "Creates CONNECT SPDU using specified session (private function)",
      "private": true
    }
  },
  "constants": {}
}

